environment:
  RUST_BACKTRACE: full
  matrix:
  - channel: stable
    target: x86_64-pc-windows-msvc
  - channel: stable
    target: x86_64-pc-windows-gnu
  ## Note: disabled as rustdoc compile changes to include_bytes!
  ## cause compile failure in 1.21 (easy to fix, but will cause failure in current stable)
  ## TODO re-enable after 1.21 stable release
  # - channel: nightly
  #   target: x86_64-pc-windows-msvc
matrix:
  allow_failures:
  - channel: nightly
install:
- appveyor DownloadFile https://win.rustup.rs/ -FileName rustup-init.exe
- rustup-init -yv --default-toolchain %channel% --default-host %target%
- set PATH=%PATH%;%USERPROFILE%\.cargo\bin
- rustc -vV
- cargo -vV
build: false
test_script:
- cargo test
